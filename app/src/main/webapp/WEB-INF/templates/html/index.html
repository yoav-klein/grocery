<!DOCTYPE html>
<html th:replace="~{html/layout :: layout(~{::main}, ~{::script})}" xmlns:th="http://www.thymeleaf.org">
    <head>
        <script type="module" th:src="@{/js/dialog.js}"></script>
    </head>
    <body>
        <main class="main">

            <section id="list" class="main__section grid notebook">
                <article class="category" th:each="category : ${itemsByCategory}">
                    <h2 class="nowrap" th:text="#{${'category.title.' + category.key}}">VEGETABLES</h2>
                    <form th:action="@{/deleteItem}" method="get">
                        <table class="category__table">
                            <thead>
                                <tr>
                                    <th scope="col" class="quantity-header"></th>
                                    <th scope="col" class="quantity-type-header"></th>
                                    <th scope="col" class="product-name-header"></th>
                                    <th scope="col" class="delete-button-header"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="item-font" th:each="item : ${category.value}">
                                    <td class="item__name" th:text="${item.quantity}">3</td>
                                    <td class="item__name" th:text="#{${'additem.quantitytype.' + item.quantityType}}">Kg</td>
                                    <td class="item__name" th:text="${item.name}">Tomatos</td>
                                    <td><button class="delete-button" name="id" th:value="${item.id}"><img src="../../../images/v-sign.png" th:src="@{/images/v-sign.png}" alt=""></button></td>
                                </tr>
                                <tr class="category__item" th:remove="all">
                                    <td>1</td>
                                    <td>Kg</td>
                                    <td>Cucumber</td>
                                    <td><button class="delete-button"><img src="../../../images/v-sign.png"  alt=""></button></td>
                                </tr>
                                <tr class="category__item" th:remove="all">
                                    <td>1</td>
                                    <td>Kg</td>
                                    <td>Parsley</td>
                                    <td><button class="delete-button"><img src="../../../images/v-sign.png"  alt=""></button></td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </article>
                <div class="button-container">
                    <button class="button-shared add-button" id="new-item-button">&#x271b;</button>
                </div>
            </section>
            <section id="add-form">
                <dialog>
                    <h2 class="center" th:text="#{additem.title}">Add Item</h2>
                    <button id="close-dialog">&#x00d7;</button>
                    <form  th:action="@{/newItem}" method="post" th:object="${item}">
                        <fieldset>
                            <ul th:if="${#fields.hasErrors('*')}">
                                <li th:each="err : ${#fields.errors('*')}" th:text="${err}">Input is incorrect</li>
                            </ul>
                            
                            <div class="field-container">
                                <label class="field-label" for="name" th:text="#{additem.label.name}">Name</label>
                                <input class="long-input" type="text" th:field="*{name}"/>
                            </div>
                            <div class="field-container">
                                <label class="field-label" for="quantity" th:text="#{additem.label.quantity}">Quantity</label>
                                <input type="number" class="quantity-input" th:field="*{quantity}"/>
                            
                                <select th:field="*{quantityType}">
                                    <option th:each="type : ${allQuantityTypes}" th:value="${type}" th:text="#{${'additem.quantitytype.' + type}}">Kg</option>
                                    <option th:remove="all">Unit</option>
                                </select>
                            </div>    
                            <div class="field-container">
                                <label class="field-label" for="category" th:text="#{additem.label.category}">Category</label>
                                <select class="long-input" th:field="*{category}">
                                    <option th:each="category : ${allCategories}" th:value="${category}" th:text="#{'category.option.' + ${category}}">Vegetables</option>
                                    <option th:remove="all">Fruits</option>
                                    <option th:remove="all">Dairy</option>
                                </select>
                            </div>
                            <div class="field-container submit-button-container">
                                <button  class="button-shared submit-button" type="submit" name="save" th:text="#{additem.submit}">Submit!</button>
                            </div>
                        
                        </fieldset>
                    </form>
                </dialog>
            </section>
            
        </main>
        
    </body>
</html>